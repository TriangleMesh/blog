<!DOCTYPE html>
<html lang="en-us">

  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=56387&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Ways to Customize Sorting in PriorityQueue - Q</title>
    <meta property="og:title" content="Ways to Customize Sorting in PriorityQueue - Q">
    
    <meta name="twitter:card" content="summary">

    
    
      
    

    
      
      <meta property="description" content="By default, Java&amp;rsquo;s PriorityQueue uses natural ordering, but we can customize the sorting rules in several ways. This article will introduce three common methods and analyze possible errors and &amp;hellip;">
      <meta property="og:description" content="By default, Java&amp;rsquo;s PriorityQueue uses natural ordering, but we can customize the sorting rules in several ways. This article will introduce three common methods and analyze possible errors and &amp;hellip;">
      
    

    
    
    

    

    
    




    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    <style>
      a {
          text-decoration: none;
      }
    </style>
    
  <head>
    <meta charset="utf-8">
    <title>Ways to Customize Sorting in PriorityQueue | Q</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="/css/custom.css">
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  </head>
  </head>
  <body class="posts">
    <header class="masthead">
      <h1><a href="/">Q</a></h1>



      <nav class="menu">
  <input id="menu-check" type="checkbox" hidden/>
  <label id="menu-label" for="menu-check" class="unselectable" hidden>
    <span class="icon close-icon">✕</span>
    <span class="icon open-icon">☰</span>
    <span class="text">Menu</span>
  </label>
  <ul>
  
  
  <li><a href="/posts/">Posts</a></li>
  
  <li><a href="/leetcode/">Leetcode</a></li>
  
  <li><a href="/about/">About</a></li>
  
  
  </ul>
</nav>

    </header>

    <article class="main">
      <header class="title">
      
<h1>Ways to Customize Sorting in PriorityQueue</h1>



<h3>






2024-09-29
</h3>

<hr>



      </header>





<p>By default, Java&rsquo;s <code>PriorityQueue</code> uses natural ordering, but we can customize the sorting rules in several ways. This article will introduce three common methods and analyze possible errors and their solutions.</p>
<h3 id="1-implementing-the-comparable-interface">1. Implementing the <code>Comparable</code> Interface</h3>
<p>Allow the object to implement the <code>Comparable</code> interface and override the <code>compareTo()</code> method to define the natural sorting order of the object. This is suitable for cases where a &ldquo;natural order&rdquo; exists.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#080;font-weight:bold">class</span> <span style="color:#b06;font-weight:bold">Student</span><span style="color:#bbb"> </span><span style="color:#080;font-weight:bold">implements</span><span style="color:#bbb"> </span>Comparable<span style="color:#333">&lt;</span>Student<span style="color:#333">&gt;</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#080;font-weight:bold">private</span><span style="color:#bbb"> </span><span style="color:#339;font-weight:bold">int</span><span style="color:#bbb"> </span>age;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#080;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#06b;font-weight:bold">Student</span>(<span style="color:#339;font-weight:bold">int</span><span style="color:#bbb"> </span>age)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#080;font-weight:bold">this</span>.<span style="color:#00c">age</span><span style="color:#bbb"> </span><span style="color:#333">=</span><span style="color:#bbb"> </span>age;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#080;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#339;font-weight:bold">int</span><span style="color:#bbb"> </span><span style="color:#06b;font-weight:bold">getAge</span>()<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#080;font-weight:bold">return</span><span style="color:#bbb"> </span>age;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#555;font-weight:bold">@Override</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#080;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#339;font-weight:bold">int</span><span style="color:#bbb"> </span><span style="color:#06b;font-weight:bold">compareTo</span>(Student<span style="color:#bbb"> </span>other)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#080;font-weight:bold">return</span><span style="color:#bbb"> </span>Integer.<span style="color:#00c">compare</span>(<span style="color:#080;font-weight:bold">this</span>.<span style="color:#00c">age</span>,<span style="color:#bbb"> </span>other.<span style="color:#00c">age</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>PriorityQueue<span style="color:#333">&lt;</span>Student<span style="color:#333">&gt;</span><span style="color:#bbb"> </span>students<span style="color:#bbb"> </span><span style="color:#333">=</span><span style="color:#bbb"> </span><span style="color:#080;font-weight:bold">new</span><span style="color:#bbb"> </span>PriorityQueue<span style="color:#333">&lt;&gt;</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>students.<span style="color:#00c">add</span>(<span style="color:#080;font-weight:bold">new</span><span style="color:#bbb"> </span>Student(20));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>students.<span style="color:#00c">add</span>(<span style="color:#080;font-weight:bold">new</span><span style="color:#bbb"> </span>Student(18));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>students.<span style="color:#00c">add</span>(<span style="color:#080;font-weight:bold">new</span><span style="color:#bbb"> </span>Student(22));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#080;font-weight:bold">while</span><span style="color:#bbb"> </span>(<span style="color:#333">!</span>students.<span style="color:#00c">isEmpty</span>())<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>System.<span style="color:#00c">out</span>.<span style="color:#00c">println</span>(students.<span style="color:#00c">poll</span>().<span style="color:#00c">getAge</span>());<span style="color:#bbb">  </span><span style="color:#888">// Output order: 18, 20, 22</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><h3 id="2-using-the-comparator-interface">2. Using the <code>Comparator</code> Interface</h3>
<p>Pass a custom <code>Comparator</code> object when constructing the <code>PriorityQueue</code> to implement custom sorting logic.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>PriorityQueue<span style="color:#333">&lt;</span>Student<span style="color:#333">&gt;</span><span style="color:#bbb"> </span>students<span style="color:#bbb"> </span><span style="color:#333">=</span><span style="color:#bbb"> </span><span style="color:#080;font-weight:bold">new</span><span style="color:#bbb"> </span>PriorityQueue<span style="color:#333">&lt;&gt;</span>(<span style="color:#080;font-weight:bold">new</span><span style="color:#bbb"> </span>Comparator<span style="color:#333">&lt;</span>Student<span style="color:#333">&gt;</span>()<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#555;font-weight:bold">@Override</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#080;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#339;font-weight:bold">int</span><span style="color:#bbb"> </span><span style="color:#06b;font-weight:bold">compare</span>(Student<span style="color:#bbb"> </span>s1,<span style="color:#bbb"> </span>Student<span style="color:#bbb"> </span>s2)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#080;font-weight:bold">return</span><span style="color:#bbb"> </span>Integer.<span style="color:#00c">compare</span>(s1.<span style="color:#00c">getAge</span>(),<span style="color:#bbb"> </span>s2.<span style="color:#00c">getAge</span>());<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>});<span style="color:#bbb">
</span></span></span></code></pre></div><h3 id="3-using-lambda-expressions">3. Using Lambda Expressions</h3>
<p>In Java 8 and later versions, you can simplify the <strong><code>Comparator</code></strong> using lambda expressions.  Note that <code>Comparable</code> must be implemented inside the class and cannot be expressed using lambda expressions.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>PriorityQueue<span style="color:#333">&lt;</span>Student<span style="color:#333">&gt;</span><span style="color:#bbb"> </span>students<span style="color:#bbb"> </span><span style="color:#333">=</span><span style="color:#bbb"> </span><span style="color:#080;font-weight:bold">new</span><span style="color:#bbb"> </span>PriorityQueue<span style="color:#333">&lt;&gt;</span>(<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>(s1,<span style="color:#bbb"> </span>s2)<span style="color:#bbb"> </span><span style="color:#333">-&gt;</span><span style="color:#bbb"> </span>Integer.<span style="color:#00c">compare</span>(s1.<span style="color:#00c">getAge</span>(),<span style="color:#bbb"> </span>s2.<span style="color:#00c">getAge</span>())<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>);<span style="color:#bbb">
</span></span></span></code></pre></div><p>Or:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>PriorityQueue<span style="color:#333">&lt;</span>Student<span style="color:#333">&gt;</span><span style="color:#bbb"> </span>students<span style="color:#bbb"> </span><span style="color:#333">=</span><span style="color:#bbb"> </span><span style="color:#080;font-weight:bold">new</span><span style="color:#bbb"> </span>PriorityQueue<span style="color:#333">&lt;&gt;</span>(<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>Comparator.<span style="color:#00c">comparingInt</span>(Student::getAge)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>);<span style="color:#bbb">
</span></span></span></code></pre></div><h3 id="note-handling-primitive-types-and-wrapper-types-in-comparisons">Note: Handling Primitive Types and Wrapper Types in Comparisons</h3>
<p>When performing comparisons, if you are using primitive types (e.g., <code>int</code>), you cannot directly call methods like <code>compareTo()</code> because primitive types do not have methods. You need to use wrapper types (e.g., <code>Integer</code>) or static comparison methods to handle this.</p>
<h4 id="common-error-analysis">Common Error Analysis</h4>
<p>The following code will lead to a compilation error:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#080;font-weight:bold">class</span> <span style="color:#b06;font-weight:bold">Student</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#080;font-weight:bold">private</span><span style="color:#bbb"> </span><span style="color:#339;font-weight:bold">int</span><span style="color:#bbb"> </span>age;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#080;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#06b;font-weight:bold">Student</span>(<span style="color:#339;font-weight:bold">int</span><span style="color:#bbb"> </span>age)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#080;font-weight:bold">this</span>.<span style="color:#00c">age</span><span style="color:#bbb"> </span><span style="color:#333">=</span><span style="color:#bbb"> </span>age;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#080;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#339;font-weight:bold">int</span><span style="color:#bbb"> </span><span style="color:#06b;font-weight:bold">getAge</span>()<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#080;font-weight:bold">return</span><span style="color:#bbb"> </span>age;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>PriorityQueue<span style="color:#333">&lt;</span>Student<span style="color:#333">&gt;</span><span style="color:#bbb"> </span>students<span style="color:#bbb"> </span><span style="color:#333">=</span><span style="color:#bbb"> </span><span style="color:#080;font-weight:bold">new</span><span style="color:#bbb"> </span>PriorityQueue<span style="color:#333">&lt;&gt;</span>((s1,<span style="color:#bbb"> </span>s2)<span style="color:#bbb"> </span><span style="color:#333">-&gt;</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#080;font-weight:bold">return</span><span style="color:#bbb"> </span>s1.<span style="color:#00c">getAge</span>().<span style="color:#00c">compareTo</span>(s2.<span style="color:#00c">getAge</span>());<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>});<span style="color:#bbb">
</span></span></span></code></pre></div><p><strong>Error Reason:</strong> The <code>getAge()</code> method returns an <code>int</code>, which is a primitive type and cannot call the <code>compareTo()</code> method. The compiler will throw the error: &ldquo;<code>int cannot be dereferenced</code>.&rdquo;</p>
<h4 id="solutions">Solutions:</h4>
<ol>
<li><strong>Change <code>age</code> to the wrapper type <code>Integer</code>:</strong></li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#080;font-weight:bold">class</span> <span style="color:#b06;font-weight:bold">Student</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#080;font-weight:bold">private</span><span style="color:#bbb"> </span>Integer<span style="color:#bbb"> </span>age;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#080;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#06b;font-weight:bold">Student</span>(Integer<span style="color:#bbb"> </span>age)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#080;font-weight:bold">this</span>.<span style="color:#00c">age</span><span style="color:#bbb"> </span><span style="color:#333">=</span><span style="color:#bbb"> </span>age;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#080;font-weight:bold">public</span><span style="color:#bbb"> </span>Integer<span style="color:#bbb"> </span><span style="color:#06b;font-weight:bold">getAge</span>()<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#080;font-weight:bold">return</span><span style="color:#bbb"> </span>age;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><p>This way, <code>getAge()</code> returns an <code>Integer</code>, and you can call the <code>compareTo()</code> method.</p>
<ol start="2">
<li><strong>Use the <code>Integer.compare(int x, int y)</code> method without modifying the <code>age</code> type:</strong></li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>PriorityQueue<span style="color:#333">&lt;</span>Student<span style="color:#333">&gt;</span><span style="color:#bbb"> </span>students<span style="color:#bbb"> </span><span style="color:#333">=</span><span style="color:#bbb"> </span><span style="color:#080;font-weight:bold">new</span><span style="color:#bbb"> </span>PriorityQueue<span style="color:#333">&lt;&gt;</span>((s1,<span style="color:#bbb"> </span>s2)<span style="color:#bbb"> </span><span style="color:#333">-&gt;</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#080;font-weight:bold">return</span><span style="color:#bbb"> </span>Integer.<span style="color:#00c">compare</span>(s1.<span style="color:#00c">getAge</span>(),<span style="color:#bbb"> </span>s2.<span style="color:#00c">getAge</span>());<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>});<span style="color:#bbb">
</span></span></span></code></pre></div><p>Or:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>PriorityQueue<span style="color:#333">&lt;</span>Student<span style="color:#333">&gt;</span><span style="color:#bbb"> </span>students<span style="color:#bbb"> </span><span style="color:#333">=</span><span style="color:#bbb"> </span>a<span style="color:#bbb"> </span><span style="color:#080;font-weight:bold">new</span><span style="color:#bbb"> </span>PriorityQueue<span style="color:#333">&lt;&gt;</span>(<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>Comparator.<span style="color:#00c">comparingInt</span>(Student::getAge)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>);<span style="color:#bbb">
</span></span></span></code></pre></div>


  <footer>
  
<nav class="post-nav">
  <span class="nav-prev">&larr; <a href="/posts/2024/09/29/mips-instruction-set-and-machine-code-generation/">MIPS Instruction Set and Machine Code Generation</a></span>
  <span class="nav-next"><a href="/posts/2024/09/30/understanding-registers-and-common-operations-in-mips-assembly/">Understanding Registers and Common Operations in MIPS Assembly</a> &rarr;</span>
</nav>





<script src="//cdn.jsdelivr.net/npm/@xiee/utils/js/math-code.js" defer></script>
<script src="//mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>

<script src="//cdn.jsdelivr.net/npm/@xiee/utils/js/center-img.js" defer></script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">


  





<script src="//cdn.jsdelivr.net/combine/gh/highlightjs/cdn-release@%3cnil%3e/build/highlight.min.js,npm/@xiee/utils/js/load-highlight.js" defer></script>



  
  <hr>
  <div class="copyright">© <a href='https://TriangleMesh.github.io/'>Q</a> | <a href='https://github.com/TriangleMesh'>Github</a> | <a href='mailto:trianglemeshq@gmail.com'>Email</a> | since 2024</div>
  
  </footer>
  </article>
  
  


  </body>
</html>

